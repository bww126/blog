## 应用的启动过程
1. 预览窗口显示：点击应用icon，系统在拉起APP进程前，会先根据APP的Theme属性创建预览窗口（禁用预览窗口或设置透明，依然看到桌面）。
1. 闪屏显示：系统拉起应用进程，执行Application的onCreate逻辑，根据闪屏layout绘制页面，显示闪屏UI。
1. 主页显示：进入主页窗口，显示主页UI。
1. 界面可操作：在启动完成后，主页面绘制完成，需要执行某些功能的初始化或预加载功能的准备，最好异步加载（控制好线程个数），尽快让UI线程可操作。

## 启动优化
### 优化工具
> TraceView性能损耗太大，测试结果不真实。最好使用systrace+函数插桩的方案。

### 优化方式
* 闪屏优化：预览窗口实现闪屏的效果（可能在低端机下导致闪屏时间过长）；合并闪屏和主页面的Activity，减少一个Activity的启动时间。
* 业务梳理：梳理启动过程中的模块加载，分必须加载、懒加载、不加载模块。在低端机学会降级功能，懒加载防止集中化，否则容易出现首页显示后无法操作的情况。
* 业务优化：针对业务抓大放小，重点看主线程慢在哪里。注意过多的线程加载会导致逻辑上的复杂。
* 线程优化：主要在于减少CPU调度带来的波动，让应用的启动时间更加稳定。
* 控制线程数量（使用并统一线程池）
* 坚持线程间的锁，避免主线程等待子线程的情况
* GC优化：启动过程控制GC次数，特别是Dalvik虚拟机。启动过程避免使用大量字符串操作，特别是序列化和反序列化。
* 系统调用优化：启动过程中，尽量不做系统调用，比如PackageManagerService、Binder调用，不过早的拉起其他进程。

## 进阶启动优化
* I/O优化：启动过程中不建议做网络I/O和磁盘I/O。
* 数据重排：Dex文件用到的类和apk里面各种资源文件比较小，读取非常频繁。可以利用系统这个机制将他们按照读取顺序重排序，减少真实I/O的次数。
	* 类重排序
	* 资源重排序
* 类加载：类加载过程中，有一个verify class的步骤，需要验证方法的每一个指令集，比较耗时，可以通过Hook去掉这一步。
* 黑科技：保活（热启动），插件化或热修复，避免应用加固。

> 通过线上监控验证启动优化效果