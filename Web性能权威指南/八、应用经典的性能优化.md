## 八、应用经典的性能优化

> 无论什么网络，也不管所用网络协议是什么版本，所有应用都应该致力于消除或减少不必要的网络延迟，将需要传输的数据压缩至最少。这两条标准是经典的性能优化最佳实践，是其他数十条性能准则的出发点。

1. 减少DNS查找 每一次主机名解析都需要一次网络往返，从而增加请求的延迟时间，同时还会阻 塞后续请求。
1. 重用TCP连接

	> 尽可能使用持久连接，以消除 TCP 握手和慢启动延迟;
	
1. 减少HTTP重定向
1. HTTP 重定向极费时间，特别是不同域名之间的重定向，更加费时;这里面既有 额外的 DNS 查询、TCP 握手，还有其他延迟。最佳的重定向次数为零。
1. 使用CDN(内容分发网络) 把数据放到离用户地理位置更近的地方，可以显著减少每次 TCP 连接的网络延 迟，增大吞吐量。这一条既适用于静态内容，也适用于动态内容;参见 4.7.2 节 中的“不缓存的原始获取”。
1. 去掉不必要的资源 任何请求都不如没有请求快。
> 	说到这，所有建议都无需解释。延迟是瓶颈，最快的速度莫过于什么也不传输。然 而，HTTP 也提供了很多额外的机制，比如缓存和压缩，还有与其版本对应的一些 性能技巧。
> 
	* 在客户端缓存资源 应该缓存应用资源，从而避免每次请求都发送相同的内容。
	* 传输压缩过的内容 传输前应该压缩应用资源，把要传输的字节减至最少:确保对每种要传输的资源 采用最好的压缩手段。
	
1. 消除不必要的请求开销
1. 减少请求的 HTTP 首部数据(比如 HTTP cookie)，节省的时间相当于几次往返 的延迟时间。
1. 并行处理请求和响应 请求和响应的排队都会导致延迟，无论是客户端还是服务器端。这一点经常被忽 视，但却会无谓地导致很长延迟。
1. 针对协议版本采取优化措施
> HTTP 1.x 支持有限的并行机制，要求打包资源、跨域分散资源，等等。相对而 言，HTTP 2.0 只要建立一个连接就能实现最优性能，同时无需针对 HTTP 1.x 的 那些优化方法。